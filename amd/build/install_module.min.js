define(["jquery","core/str","core/modal_factory","core/modal_events"],function(a,b,c,d){return{init:function(){var b=function(){a(".modlib-sections .dropdown-item").on("click",function(){var b=a("#courseid").val(),d=window.location.href,e=a(this).attr("value");if(console.log("course ID = "+b),console.log("return URL = "+d),console.log("command = "+e),0===a('input[class="module"]:checked').length)c.create({type:c.types.CANCEL,title:"No Module selected",body:"Please select at least one module to install."}).then(function(a){a.show()});else{var f=a(this).attr("value"),g=a(this).html();console.log("Install into section "+f+" -> "+g),a('input[class="module"]:checked').each(function(){var b={};b.id=a(this).val(),b.name=a(this).attr("name"),b.type=a(this).attr("module_type"),console.log('=> checked module "'+b.name+'" (ID '+b.id+") type = "+b.type),console.log(window.location.host),console.log(window.location.pathname);var c=window.location.pathname,e=c.split("/");console.log("-----"),e.shift(),execUrl=window.location.protocol+"//"+window.location.host+"/"+e.shift()+"/blocks/modlib/execute.php",console.log(execUrl),console.log("-----"),e=a.ajax({url:execUrl,type:"POST",data:{sectionid:f,moduleid:b.id,type:b.type},success:function(a){""!==a?console.log("Execution result:\n"+a):console.warn("Unsupported module type for installation: "+b.type+"!\n"),window.location=d},error:function(a){console.error(a)}})})}})},d=function(){a(".test").on("click",function(){console.log("test!")})},e=function(){b(),d()};a(document).ready(function(){console.log("=================< modlib/install_module >================="),e(),a("tr.module").css("cursor","pointer")})}}});